# [2026-01-07] HTTP Headers Configuration
#
# ⚠️ 安全標頭 (CSP, HSTS, X-Frame-Options 等) 已遷移至 Cloudflare
# 請參考: docs/dev/006_cloudflare_security_headers_configuration.md
#
# 此文件僅保留:
# 1. 快取策略 (Cache-Control)
# 2. Content-Type charset
# 3. OG 圖片 CORS 設定
#
# 參考:
# - https://web.dev/articles/http-cache/
# - https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control

# ============================================================
# HTTP 快取策略
# ============================================================

# HTML - 短期快取（1小時），必須重新驗證
# [SEO-fix:2026-01-06] 添加 Content-Type charset=utf-8
/
  Cache-Control: public, max-age=3600, must-revalidate
  Content-Type: text/html; charset=utf-8
/*.html
  Cache-Control: public, max-age=3600, must-revalidate
  Content-Type: text/html; charset=utf-8

# 資產檔案 - 長期快取（1年），使用 hash 檔名確保版本控制
/assets/*
  Cache-Control: public, max-age=31536000, immutable

# Service Worker - 不快取，確保立即更新
/sw.js
  Cache-Control: public, max-age=0, must-revalidate
/workbox-*.js
  Cache-Control: public, max-age=0, must-revalidate

# Manifest 與 Icons - 中期快取（1天）
/manifest.webmanifest
  Cache-Control: public, max-age=86400, must-revalidate
/ratewise/manifest.webmanifest
  Cache-Control: public, max-age=86400, must-revalidate
/icons/*
  Cache-Control: public, max-age=86400, must-revalidate
/ratewise/icons/*
  Cache-Control: public, max-age=86400, must-revalidate
/*.ico
  Cache-Control: public, max-age=86400, must-revalidate
/*.svg
  Cache-Control: public, max-age=86400, must-revalidate
/*.png
  Cache-Control: public, max-age=86400, must-revalidate
/ratewise/*.ico
  Cache-Control: public, max-age=86400, must-revalidate
/ratewise/*.svg
  Cache-Control: public, max-age=86400, must-revalidate
/ratewise/*.png
  Cache-Control: public, max-age=86400, must-revalidate

# 其他靜態資源 - 中期快取（1天）
/robots.txt
  Cache-Control: public, max-age=86400
/sitemap.xml
  Cache-Control: public, max-age=86400
/ratewise/robots.txt
  Cache-Control: public, max-age=86400
/ratewise/sitemap.xml
  Cache-Control: public, max-age=86400
/ratewise/llms.txt
  Cache-Control: public, max-age=86400
/*.css
  Cache-Control: public, max-age=86400
/*.js
  Cache-Control: public, max-age=86400

# ============================================================
# OG 圖片 CORS 設定
# ============================================================
# 允許社群媒體爬蟲讀取 OG 圖片
# 注意：Cloudflare Worker 會優先處理，此為備援

/og-image.png
  Access-Control-Allow-Origin: *
  Cross-Origin-Resource-Policy: cross-origin
/ratewise/og-image.png
  Access-Control-Allow-Origin: *
  Cross-Origin-Resource-Policy: cross-origin
/twitter-image.png
  Access-Control-Allow-Origin: *
  Cross-Origin-Resource-Policy: cross-origin
/ratewise/twitter-image.png
  Access-Control-Allow-Origin: *
  Cross-Origin-Resource-Policy: cross-origin
