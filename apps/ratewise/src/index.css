@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * Modern Design System - ParkKeeper Style (SSOT)
 *
 * @description 現代化設計系統，參考 ParkKeeper 設計風格
 *              6 種風格（Zen/Nitro/Kawaii/Classic/Ocean/Forest）
 *              包含圖表專用 Design Token (SSOT for MiniTrendChart)
 *
 * @reference ParkKeeper UI Design, themes.ts SSOT
 * @created 2026-01-16
 * @updated 2026-01-17 - 移除深色模式，簡化為僅風格切換
 * @version 5.0.0
 */

@layer base {
  /* ========================================
     Zen 風格 - 極簡專業（預設）
     禪意極簡，以 violet/blue 為圖表色調
     ======================================== */
  /* [fix:2026-01-20] 極簡風格：紫色為主色，符合高級金融 App 設計 */
  :root,
  [data-style='zen'] {
    --color-background: 248 250 252;
    --color-surface: 255 255 255;
    --color-text: 15 23 42;
    --color-text-muted: 100 116 139;
    --color-primary: 124 58 237; /* violet-600 - 紫色主色 */
    --color-secondary: 99 102 241; /* indigo-500 - 靛藍輔色 */
    --color-accent: 139 92 246; /* violet-500 */
    --color-border: 226 232 240;
    --color-info: 14 165 233;

    /* 圖表專用 Token (SSOT) */
    --color-chart-line: 139 92 246; /* violet-500 */
    --color-chart-area-top: 139 92 246; /* violet-500 */
    --color-chart-area-bottom: 59 130 246; /* blue-500 */

    /* [fix:2026-01-20] 卡片層級區分 Token - 用於嵌套卡片視覺區分 */
    --color-surface-elevated: 248 250 252; /* slate-50 - 微灰底色 */
    --color-surface-sunken: 241 245 249; /* slate-100 - 下沉區域 */

    /* 向後相容映射 */
    --color-foreground: var(--color-text);
    --color-foreground-secondary: var(--color-text-muted);
    --color-foreground-muted: var(--color-text-muted);
    --color-card: var(--color-surface);
    --color-card-foreground: var(--color-text);
    --color-ring: var(--color-accent);

    /* 舊版 neutral 系列 */
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: 241 245 249;
    --color-neutral: 226 232 240;
    --color-neutral-dark: 203 213 225;
    --color-neutral-darker: 148 163 184;
    --color-neutral-text: var(--color-text);
    --color-neutral-text-secondary: var(--color-text-muted);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-neutral-border: var(--color-border);

    /* 舊版 primary 系列 - 紫色調 */
    --color-primary-bg: 245 243 255; /* violet-50 */
    --color-primary-light: 237 233 254; /* violet-100 */
    --color-primary-hover: 109 40 217; /* violet-700 */
    --color-primary-active: 196 181 253; /* violet-300 */
    --color-primary-text-light: 167 139 250; /* violet-400 */
    --color-primary-ring: 139 92 246; /* violet-500 */
    --color-primary-dark: 91 33 182; /* violet-800 */
    --color-primary-darker: 76 29 149; /* violet-900 */
    --color-primary-text: 124 58 237; /* violet-600 */

    /* 狀態色 */
    --color-destructive: 239 68 68;
    --color-destructive-hover: 220 38 38;
    --color-destructive-foreground: 255 255 255;
    --color-success: 34 197 94;
    --color-success-foreground: 255 255 255;
    --color-warning: 245 158 11;
    --color-warning-foreground: 255 255 255;

    /* 舊版 danger/success/warning 系列 */
    --color-danger-bg: 254 242 242;
    --color-danger-light: 254 226 226;
    --color-danger-hover: 220 38 38;
    --color-danger-active: 252 165 165;
    --color-danger-text: 239 68 68;
    --color-danger: 239 68 68;
    --color-success-bg: 240 253 244;
    --color-success-light: 220 252 231;
    --color-success-hover: 187 247 208;
    --color-success-active: 134 239 172;
    --color-success-text: 34 197 94;
    --color-warning-light: 254 243 199;
    --color-warning-hover: 253 230 138;
    --color-warning-active: 252 211 77;

    /* Favorite 系列 */
    --color-favorite-light: 254 243 199;
    --color-favorite: 234 179 8;

    /* Highlight 系列 */
    --color-highlight-from: 254 252 232;
    --color-highlight-to: 255 251 235;

    /* Brand 系列（紫色漸變風格） */
    --color-brand-from: var(--color-background);
    --color-brand-via: var(--color-background);
    --color-brand-to: var(--color-background);
    --color-brand-border: var(--color-border);
    --color-brand-decoration: var(--color-primary-light);
    --color-brand-button-from: 139 92 246; /* violet-500 */
    --color-brand-button-to: 124 58 237; /* violet-600 */
    --color-brand-button-hover-from: 124 58 237; /* violet-600 */
    --color-brand-button-hover-to: 109 40 217; /* violet-700 */
    --color-brand-icon-from: var(--color-primary-light);
    --color-brand-icon-to: var(--color-primary-light);
    --color-brand-text: 139 92 246; /* violet-500 */
    --color-brand-text-dark: 91 33 182; /* violet-800 */
    --color-brand-shadow: var(--color-primary-light);

    /* Footer 系列 */
    --color-footer-from: var(--color-text);
    --color-footer-via: var(--color-text);
    --color-footer-to: var(--color-text);
  }

  /* ========================================
     Nitro 風格 - 深色科技感
     靈感：賽車儀表板、霓虹燈、科幻 UI
     圖表使用霓虹藍/綠漸變
     ======================================== */
  [data-style='nitro'] {
    /* 核心語義色彩 - 固定深色調 */
    --color-background: 2 6 23; /* slate-950 */
    --color-surface: 15 23 42; /* slate-900 */
    --color-text: 255 255 255;
    --color-text-muted: 100 116 139; /* slate-500 */
    --color-primary: 0 212 255; /* 霓虹藍 */
    --color-secondary: 129 140 248; /* indigo-400 */
    --color-accent: 0 255 136; /* 霓虹綠 */
    --color-border: 30 41 59; /* slate-800 */

    /* 狀態語義色彩 - 霓虹風格 */
    --color-info: 56 189 248; /* sky-400 */
    --color-success: 52 211 153; /* emerald-400 */
    --color-warning: 251 191 36; /* amber-400 */
    --color-error: 248 113 113; /* red-400 */

    /* 圖表專用 Token (SSOT) - 霓虹風格 */
    --color-chart-line: 103 232 249; /* cyan-300 */
    --color-chart-area-top: 103 232 249; /* cyan-300 */
    --color-chart-area-bottom: 0 255 136; /* 霓虹綠 */

    /* [fix:2026-01-20] 卡片層級區分 Token - 深色主題 */
    --color-surface-elevated: 30 41 59; /* slate-800 - 略亮於 surface */
    --color-surface-sunken: 2 6 23; /* slate-950 - 下沉區域 */

    /* 舊版 primary 系列 - 霓虹風格 */
    --color-primary-bg: 30 41 59; /* slate-800 */
    --color-primary-light: 30 41 59; /* slate-800 - 深色背景用 */
    --color-primary-hover: 34 211 238; /* cyan-400 - 霓虹藍亮色 */

    /* 向後相容映射 */
    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-destructive: var(--color-error);
    --color-success-text: var(--color-success);
    --color-warning-text: var(--color-warning);
  }

  /* ========================================
     Kawaii 風格 - 可愛粉嫩
     靈感：日系少女風、馬卡龍色系、甜點店
     圖表使用粉紅漸變
     ======================================== */
  [data-style='kawaii'] {
    /* 核心語義色彩 */
    --color-background: 255 250 244; /* warm cream */
    --color-surface: 255 255 255;
    --color-text: 142 124 128; /* muted pink-brown */
    --color-text-muted: 180 160 165;
    --color-primary: 255 105 180; /* hot pink */
    --color-secondary: 236 72 153; /* pink-500 */
    --color-accent: 255 182 193; /* light pink */
    --color-border: 255 228 225; /* misty rose */

    /* 狀態語義色彩 - 柔和可愛風 */
    --color-info: 147 197 253; /* blue-300 - 天空藍 */
    --color-success: 134 239 172; /* green-300 - 薄荷綠 */
    --color-warning: 253 224 71; /* yellow-300 - 檸檬黃 */
    --color-error: 252 165 165; /* red-300 - 珊瑚紅 */

    /* 圖表專用 Token (SSOT) - 粉紅漸變 */
    --color-chart-line: 236 72 153; /* pink-500 */
    --color-chart-area-top: 236 72 153; /* pink-500 */
    --color-chart-area-bottom: 244 114 182; /* pink-400 */

    /* [fix:2026-01-20] 卡片層級區分 Token - 粉嫩風格 */
    --color-surface-elevated: 255 241 242; /* rose-50 */
    --color-surface-sunken: 255 228 230; /* rose-100 */

    /* 舊版 primary 系列 - 粉嫩風格 */
    --color-primary-bg: 253 242 248; /* pink-50 */
    --color-primary-light: 252 231 243; /* pink-100 */
    --color-primary-hover: 219 39 119; /* pink-600 */

    /* 向後相容映射 */
    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-destructive: var(--color-error);
    --color-success-text: var(--color-success);
    --color-warning-text: var(--color-warning);
  }

  /* ========================================
     Classic 風格 - 復古書卷
     靈感：古典圖書館、皮革裝幀、老式打字機
     圖表使用琥珀漸變
     ======================================== */
  [data-style='classic'] {
    /* 核心語義色彩 */
    --color-background: 255 250 251; /* warm white - 象牙白 */
    --color-surface: 255 255 255;
    --color-text: 67 20 7; /* dark brown - 深棕 */
    --color-text-muted: 120 80 60; /* 中棕 */
    --color-primary: 139 69 19; /* saddle brown - 馬鞍棕 */
    --color-secondary: 161 98 7; /* amber-700 - 琥珀 */
    --color-accent: 180 120 80; /* tan - 棕褐 */
    --color-border: 245 230 220; /* linen - 亞麻 */

    /* 狀態語義色彩 - 復古調性 */
    --color-info: 59 130 246; /* blue-500 - 墨水藍 */
    --color-success: 22 163 74; /* green-600 - 橄欖綠 */
    --color-warning: 180 83 9; /* amber-700 - 琥珀警告 */
    --color-error: 185 28 28; /* red-700 - 磚紅 */

    /* 圖表專用 Token (SSOT) - 琥珀漸變 */
    --color-chart-line: 180 83 9; /* amber-700 */
    --color-chart-area-top: 180 83 9; /* amber-700 */
    --color-chart-area-bottom: 217 119 6; /* amber-600 */

    /* [fix:2026-01-20] 卡片層級區分 Token - 復古風格 */
    --color-surface-elevated: 254 252 232; /* yellow-50 - 羊皮紙 */
    --color-surface-sunken: 254 249 195; /* yellow-100 */

    /* 舊版 primary 系列 - 復古風格 */
    --color-primary-bg: 254 243 199; /* amber-100 */
    --color-primary-light: 254 243 199; /* amber-100 */
    --color-primary-hover: 146 64 14; /* amber-800 */

    /* 向後相容映射 */
    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-destructive: var(--color-error);
    --color-success-text: var(--color-success);
    --color-warning-text: var(--color-warning);
  }

  /* ========================================
     Ocean 風格 - 海洋深邃
     靈感：深海、海浪、海洋生態
     圖表使用青藍漸變
     ======================================== */
  [data-style='ocean'] {
    /* 核心語義色彩 */
    --color-background: 240 249 255; /* sky-50 */
    --color-surface: 255 255 255;
    --color-text: 7 89 133; /* cyan-800 */
    --color-text-muted: 22 78 99; /* cyan-900 lighter */
    --color-primary: 6 182 212; /* cyan-500 */
    --color-secondary: 14 165 233; /* sky-500 */
    --color-accent: 20 184 166; /* teal-500 */
    --color-border: 186 230 253; /* sky-200 */

    /* 狀態語義色彩 - 海洋調性 */
    --color-info: 56 189 248; /* sky-400 */
    --color-success: 20 184 166; /* teal-500 */
    --color-warning: 245 158 11; /* amber-500 */
    --color-error: 239 68 68; /* red-500 */

    /* 圖表專用 Token (SSOT) - 青藍漸變 */
    --color-chart-line: 6 182 212; /* cyan-500 */
    --color-chart-area-top: 6 182 212; /* cyan-500 */
    --color-chart-area-bottom: 20 184 166; /* teal-500 */

    /* [fix:2026-01-20] 卡片層級區分 Token - 海洋風格 */
    --color-surface-elevated: 224 242 254; /* sky-100 - 淺海 */
    --color-surface-sunken: 186 230 253; /* sky-200 */

    /* 舊版 primary 系列 - 海洋風格 */
    --color-primary-bg: 207 250 254; /* cyan-100 */
    --color-primary-light: 207 250 254; /* cyan-100 */
    --color-primary-hover: 8 145 178; /* cyan-600 */

    /* 向後相容映射 */
    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-destructive: var(--color-error);
    --color-success-text: var(--color-success);
    --color-warning-text: var(--color-warning);
  }

  /* ========================================
     Forest 風格 - 森林自然
     靈感：原始森林、大自然、綠意盎然
     圖表使用翠綠漸變
     ======================================== */
  [data-style='forest'] {
    /* 核心語義色彩 */
    --color-background: 240 253 244; /* green-50 */
    --color-surface: 255 255 255;
    --color-text: 20 83 45; /* green-800 */
    --color-text-muted: 22 101 52; /* green-700 */
    --color-primary: 5 150 105; /* emerald-600 */
    --color-secondary: 22 163 74; /* green-600 */
    --color-accent: 101 163 13; /* lime-600 */
    --color-border: 187 247 208; /* green-200 */

    /* 狀態語義色彩 - 自然調性 */
    --color-info: 59 130 246; /* blue-500 */
    --color-success: 34 197 94; /* green-500 */
    --color-warning: 234 179 8; /* yellow-500 */
    --color-error: 220 38 38; /* red-600 */

    /* 圖表專用 Token (SSOT) - 翠綠漸變 */
    --color-chart-line: 5 150 105; /* emerald-600 */
    --color-chart-area-top: 5 150 105; /* emerald-600 */
    --color-chart-area-bottom: 34 197 94; /* green-500 */

    /* [fix:2026-01-20] 卡片層級區分 Token - 森林風格 */
    --color-surface-elevated: 220 252 231; /* green-100 - 嫩葉 */
    --color-surface-sunken: 187 247 208; /* green-200 */

    /* 舊版 primary 系列 - 森林風格 */
    --color-primary-bg: 209 250 229; /* emerald-100 */
    --color-primary-light: 209 250 229; /* emerald-100 */
    --color-primary-hover: 4 120 87; /* emerald-700 */

    /* 向後相容映射 */
    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-destructive: var(--color-error);
    --color-success-text: var(--color-success);
    --color-warning-text: var(--color-warning);
  }
}

/**
 * 基礎 Body 樣式
 */
body {
  background-color: rgb(var(--color-background));
  color: rgb(var(--color-text));
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family:
    'Inter',
    'Noto Sans TC',
    system-ui,
    -apple-system,
    sans-serif;
  line-height: 1.6;
  transition:
    background-color 0.3s ease,
    color 0.3s ease;
}

/**
 * 現代化動畫與工具類
 */
@layer utilities {
  /* 隱藏滾動條但保留滾動功能（ParkKeeper 風格） */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* 安全區域適配 */
  .pt-safe-top {
    padding-top: env(safe-area-inset-top, 0);
  }
  .pb-safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  /* 入場動畫 */
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slide-up {
    from {
      transform: translateY(0.5rem);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-in-bounce {
    0% {
      transform: translateY(-1rem) scale(0.95);
      opacity: 0.3;
    }
    50% {
      transform: translateY(0.25rem) scale(1.01);
    }
    100% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }

  .animate-slide-in-bounce {
    animation: slide-in-bounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* 緩慢脈動 */
  @keyframes ping-slow {
    0%,
    100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.9;
    }
  }

  .animate-ping-slow {
    animation: ping-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* 柔和脈動 */
  @keyframes pulse-soft {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.95;
    }
  }

  .animate-pulse-soft {
    animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* iOS Safe Area */
  @supports (padding: max(0px)) {
    .safe-area-inset-bottom {
      padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }
  }

  @media (min-width: 768px) {
    main {
      padding-bottom: 1.5rem;
    }
  }
}

/**
 * 現代化元件樣式（ParkKeeper 風格）
 */
@layer components {
  /* 毛玻璃效果 */
  .glass {
    background-color: rgb(var(--color-background) / 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  /* 現代化卡片 */
  .card {
    background-color: rgb(var(--color-surface));
    border-radius: 1.5rem;
    border: 1px solid rgb(var(--color-border) / 0.5);
    box-shadow:
      0 1px 2px 0 rgb(0 0 0 / 0.03),
      0 1px 3px 0 rgb(0 0 0 / 0.05);
    transition: all 0.2s ease;
  }

  .card:hover {
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.05),
      0 2px 4px -2px rgb(0 0 0 / 0.05);
  }

  /* 現代化按鈕 */
  .btn-primary {
    background-color: rgb(var(--color-primary));
    color: rgb(var(--color-background));
    border-radius: 1rem;
    padding: 0.75rem 1.5rem;
    font-weight: 600;
    transition: all 0.2s ease;
  }

  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgb(var(--color-primary) / 0.3);
  }

  .btn-primary:active {
    transform: translateY(0);
  }

  /* 陰影層級（ParkKeeper 風格） */
  .shadow-elevation-1 {
    box-shadow:
      0 1px 2px 0 rgb(0 0 0 / 0.03),
      0 1px 3px 0 rgb(0 0 0 / 0.05);
  }

  .shadow-elevation-2 {
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.05),
      0 2px 4px -2px rgb(0 0 0 / 0.05);
  }

  .shadow-elevation-3 {
    box-shadow: 0 8px 25px rgb(var(--color-primary) / 0.4);
  }

  /* 選中狀態的 ring */
  .ring-selected {
    ring-width: 2px;
    ring-offset-width: 2px;
    ring-color: rgb(var(--color-primary));
  }

  /* ========================================
     TrendChartSkeleton 骨架屏樣式
     使用 CSS Variables 支援主題切換
     注意：SVG stop/circle 元素使用 inline style
     （SVG 內部元素不支援 CSS class 樣式）
     ======================================== */

  /* 骨架屏容器背景 */
  .skeleton-bg {
    background: linear-gradient(
      to bottom right,
      rgb(var(--color-chart-area-bottom) / 0.15),
      rgb(var(--color-chart-line) / 0.1)
    );
  }
}
