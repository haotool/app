@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * Modern Design System - ParkKeeper Style
 *
 * @description 現代化設計系統，參考 ParkKeeper 設計風格
 *              4 種風格（Nitro/Kawaii/Zen/Classic）+ 淺深模式
 *
 * @reference ParkKeeper UI Design
 * @created 2026-01-16
 * @version 3.0.0
 */

@layer base {
  /* ========================================
     Zen 風格 - 淺色模式（預設）
     ======================================== */
  :root,
  [data-style='zen'][data-mode='light'] {
    --color-background: 248 250 252;
    --color-surface: 255 255 255;
    --color-text: 15 23 42;
    --color-text-muted: 100 116 139;
    --color-primary: 30 41 59;
    --color-secondary: 71 85 105;
    --color-accent: 59 130 246;
    --color-border: 226 232 240;
    --color-info: 14 165 233;

    /* 向後相容映射 */
    --color-foreground: var(--color-text);
    --color-foreground-secondary: var(--color-text-muted);
    --color-foreground-muted: var(--color-text-muted);
    --color-card: var(--color-surface);
    --color-card-foreground: var(--color-text);
    --color-ring: var(--color-accent);

    /* 舊版 neutral 系列 */
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: 241 245 249;
    --color-neutral: 226 232 240;
    --color-neutral-dark: 203 213 225;
    --color-neutral-darker: 148 163 184;
    --color-neutral-text: var(--color-text);
    --color-neutral-text-secondary: var(--color-text-muted);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-neutral-border: var(--color-border);

    /* 舊版 primary 系列 */
    --color-primary-bg: 237 233 254;
    --color-primary-light: 237 233 254;
    --color-primary-hover: 109 40 217;
    --color-primary-active: 196 181 253;
    --color-primary-text-light: 167 139 250;
    --color-primary-ring: var(--color-accent);
    --color-primary-dark: 109 40 217;
    --color-primary-darker: 91 33 182;
    --color-primary-text: 124 58 237;

    /* 狀態色 */
    --color-destructive: 239 68 68;
    --color-destructive-hover: 220 38 38;
    --color-destructive-foreground: 255 255 255;
    --color-success: 34 197 94;
    --color-success-foreground: 255 255 255;
    --color-warning: 245 158 11;
    --color-warning-foreground: 255 255 255;

    /* 舊版 danger/success/warning 系列 */
    --color-danger-bg: 254 242 242;
    --color-danger-light: 254 226 226;
    --color-danger-hover: 220 38 38;
    --color-danger-active: 252 165 165;
    --color-danger-text: 239 68 68;
    --color-danger: 239 68 68;
    --color-success-bg: 240 253 244;
    --color-success-light: 220 252 231;
    --color-success-hover: 187 247 208;
    --color-success-active: 134 239 172;
    --color-success-text: 34 197 94;
    --color-warning-light: 254 243 199;
    --color-warning-hover: 253 230 138;
    --color-warning-active: 252 211 77;

    /* Favorite 系列 */
    --color-favorite-light: 254 243 199;
    --color-favorite: 234 179 8;

    /* Highlight 系列 */
    --color-highlight-from: 254 252 232;
    --color-highlight-to: 255 251 235;

    /* Brand 系列（扁平化） */
    --color-brand-from: var(--color-background);
    --color-brand-via: var(--color-background);
    --color-brand-to: var(--color-background);
    --color-brand-border: var(--color-border);
    --color-brand-decoration: var(--color-primary-light);
    --color-brand-button-from: var(--color-primary);
    --color-brand-button-to: var(--color-primary);
    --color-brand-button-hover-from: var(--color-primary-hover);
    --color-brand-button-hover-to: var(--color-primary-hover);
    --color-brand-icon-from: var(--color-primary-light);
    --color-brand-icon-to: var(--color-primary-light);
    --color-brand-text: var(--color-accent);
    --color-brand-text-dark: var(--color-primary-dark);
    --color-brand-shadow: var(--color-primary-light);

    /* Footer 系列 */
    --color-footer-from: var(--color-text);
    --color-footer-via: var(--color-text);
    --color-footer-to: var(--color-text);
  }

  /* Zen 風格 - 深色模式 */
  [data-style='zen'][data-mode='dark'],
  .dark:not([data-style]),
  [data-mode='dark']:not([data-style]) {
    --color-background: 15 23 42;
    --color-surface: 30 41 59;
    --color-text: 248 250 252;
    --color-text-muted: 148 163 184;
    --color-primary: 203 213 225;
    --color-secondary: 148 163 184;
    --color-accent: 96 165 250;
    --color-border: 51 65 85;
    --color-info: 56 189 248;

    --color-foreground: var(--color-text);
    --color-foreground-secondary: var(--color-text-muted);
    --color-foreground-muted: var(--color-text-muted);
    --color-card: var(--color-surface);
    --color-card-foreground: var(--color-text);

    --color-neutral-bg: var(--color-background);
    --color-neutral-light: 30 41 59;
    --color-neutral: 51 65 85;
    --color-neutral-dark: 2 6 23;
    --color-neutral-darker: 2 6 23;
    --color-neutral-text: var(--color-text);
    --color-neutral-text-secondary: var(--color-text-muted);
    --color-neutral-text-muted: var(--color-text-muted);
    --color-neutral-border: var(--color-border);

    --color-primary-bg: 46 16 101;
    --color-primary-light: 76 29 149;
    --color-primary-hover: 196 181 253;
    --color-primary-active: 109 40 217;
    --color-primary-text-light: 196 181 253;
    --color-primary-dark: 196 181 253;
    --color-primary-darker: 221 214 254;
    --color-primary-text: 167 139 250;

    --color-destructive: 248 113 113;
    --color-destructive-hover: 252 165 165;
    --color-destructive-foreground: 15 23 42;
    --color-success: 74 222 128;
    --color-success-foreground: 15 23 42;
    --color-warning: 251 191 36;
    --color-warning-foreground: 15 23 42;

    --color-danger-bg: 69 10 10;
    --color-danger-light: 127 29 29;
    --color-danger-hover: 252 165 165;
    --color-danger-active: 185 28 28;
    --color-danger-text: 248 113 113;
    --color-danger: 248 113 113;
    --color-success-bg: 10 40 19;
    --color-success-light: 20 83 45;
    --color-success-hover: 22 101 52;
    --color-success-active: 21 128 61;
    --color-success-text: 74 222 128;
    --color-warning-light: 120 53 15;
    --color-warning-hover: 146 64 14;
    --color-warning-active: 180 83 9;

    --color-favorite-light: 202 138 4;
    --color-favorite: 250 204 21;
    --color-highlight-from: 120 53 15;
    --color-highlight-to: 120 53 15;
  }

  /* ========================================
     Nitro 風格 - 深色科技感
     ======================================== */
  [data-style='nitro'] {
    --color-background: 15 23 42;
    --color-surface: 30 41 59;
    --color-text: 255 255 255;
    --color-text-muted: 148 163 184;
    --color-primary: 0 212 255;
    --color-secondary: 99 102 241;
    --color-accent: 0 255 136;
    --color-border: 51 65 85;
    --color-info: 56 189 248;

    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
  }

  [data-style='nitro'][data-mode='dark'] {
    --color-background: 2 6 23;
    --color-surface: 15 23 42;
    --color-border: 30 41 59;
  }

  /* ========================================
     Kawaii 風格 - 可愛粉嫩
     ======================================== */
  [data-style='kawaii'] {
    --color-background: 255 250 244;
    --color-surface: 255 255 255;
    --color-text: 142 124 128;
    --color-text-muted: 180 160 165;
    --color-primary: 255 105 180;
    --color-secondary: 236 72 153;
    --color-accent: 255 182 193;
    --color-border: 255 228 225;
    --color-info: 244 114 182;

    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
  }

  [data-style='kawaii'][data-mode='dark'] {
    --color-background: 45 35 40;
    --color-surface: 60 48 55;
    --color-text: 255 235 238;
    --color-text-muted: 180 160 170;
    --color-primary: 255 130 190;
    --color-secondary: 244 114 182;
    --color-border: 80 65 75;
    --color-info: 249 168 212;
  }

  /* ========================================
     Classic 風格 - 復古書卷
     ======================================== */
  [data-style='classic'] {
    --color-background: 255 250 251;
    --color-surface: 255 255 255;
    --color-text: 67 20 7;
    --color-text-muted: 120 80 60;
    --color-primary: 139 69 19;
    --color-secondary: 161 98 7;
    --color-accent: 180 120 80;
    --color-border: 245 230 220;
    --color-info: 180 83 9;

    --color-foreground: var(--color-text);
    --color-neutral-bg: var(--color-background);
    --color-neutral-light: var(--color-surface);
    --color-neutral-text: var(--color-text);
    --color-neutral-text-muted: var(--color-text-muted);
  }

  [data-style='classic'][data-mode='dark'] {
    --color-background: 35 25 20;
    --color-surface: 50 38 32;
    --color-text: 255 245 240;
    --color-text-muted: 180 160 150;
    --color-primary: 210 160 120;
    --color-secondary: 217 119 6;
    --color-border: 70 55 45;
    --color-info: 245 158 11;
  }
}

/**
 * 基礎 Body 樣式
 */
body {
  background-color: rgb(var(--color-background));
  color: rgb(var(--color-text));
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family:
    'Inter',
    'Noto Sans TC',
    system-ui,
    -apple-system,
    sans-serif;
  line-height: 1.6;
  transition:
    background-color 0.3s ease,
    color 0.3s ease;
}

/**
 * 現代化動畫與工具類
 */
@layer utilities {
  /* 隱藏滾動條但保留滾動功能（ParkKeeper 風格） */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* 安全區域適配 */
  .pt-safe-top {
    padding-top: env(safe-area-inset-top, 0);
  }
  .pb-safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  /* 入場動畫 */
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slide-up {
    from {
      transform: translateY(0.5rem);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-in-bounce {
    0% {
      transform: translateY(-1rem) scale(0.95);
      opacity: 0.3;
    }
    50% {
      transform: translateY(0.25rem) scale(1.01);
    }
    100% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }

  .animate-slide-in-bounce {
    animation: slide-in-bounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* 緩慢脈動 */
  @keyframes ping-slow {
    0%,
    100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.9;
    }
  }

  .animate-ping-slow {
    animation: ping-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* 柔和脈動 */
  @keyframes pulse-soft {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.95;
    }
  }

  .animate-pulse-soft {
    animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* iOS Safe Area */
  @supports (padding: max(0px)) {
    .safe-area-inset-bottom {
      padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }
  }

  @media (min-width: 768px) {
    main {
      padding-bottom: 1.5rem;
    }
  }
}

/**
 * 現代化元件樣式（ParkKeeper 風格）
 */
@layer components {
  /* 毛玻璃效果 */
  .glass {
    background-color: rgb(var(--color-background) / 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  /* 現代化卡片 */
  .card {
    background-color: rgb(var(--color-surface));
    border-radius: 1.5rem;
    border: 1px solid rgb(var(--color-border) / 0.5);
    box-shadow:
      0 1px 2px 0 rgb(0 0 0 / 0.03),
      0 1px 3px 0 rgb(0 0 0 / 0.05);
    transition: all 0.2s ease;
  }

  .card:hover {
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.05),
      0 2px 4px -2px rgb(0 0 0 / 0.05);
  }

  /* 現代化按鈕 */
  .btn-primary {
    background-color: rgb(var(--color-primary));
    color: rgb(var(--color-background));
    border-radius: 1rem;
    padding: 0.75rem 1.5rem;
    font-weight: 600;
    transition: all 0.2s ease;
  }

  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgb(var(--color-primary) / 0.3);
  }

  .btn-primary:active {
    transform: translateY(0);
  }

  /* 陰影層級（ParkKeeper 風格） */
  .shadow-elevation-1 {
    box-shadow:
      0 1px 2px 0 rgb(0 0 0 / 0.03),
      0 1px 3px 0 rgb(0 0 0 / 0.05);
  }

  .shadow-elevation-2 {
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.05),
      0 2px 4px -2px rgb(0 0 0 / 0.05);
  }

  .shadow-elevation-3 {
    box-shadow: 0 8px 25px rgb(var(--color-primary) / 0.4);
  }

  /* 選中狀態的 ring */
  .ring-selected {
    ring-width: 2px;
    ring-offset-width: 2px;
    ring-color: rgb(var(--color-primary));
  }
}
