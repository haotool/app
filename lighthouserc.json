{
  "$comment": "[fix:2025-12-24] 更新 Lighthouse CI 配置以達到 95+ 分目標",
  "ci": {
    "collect": {
      "staticDistDir": "./apps/ratewise/dist",
      "url": ["http://localhost/ratewise/"],
      "isSinglePageApplication": true,
      "numberOfRuns": 5,
      "settings": {
        "preset": "desktop",
        "chromeFlags": "--headless=new --no-sandbox --disable-gpu --disable-dev-shm-usage",
        "maxWaitForLoad": 60000,
        "throttling": {
          "rttMs": 40,
          "throughputKbps": 10240,
          "cpuSlowdownMultiplier": 1
        },
        "screenEmulation": {
          "mobile": false,
          "width": 1440,
          "height": 900,
          "deviceScaleFactor": 1,
          "disabled": false
        }
      }
    },
    "assert": {
      "preset": "lighthouse:recommended",
      "assertions": {
        "categories:performance": ["error", { "minScore": 0.95 }],
        "categories:accessibility": ["error", { "minScore": 0.95 }],
        "categories:best-practices": ["error", { "minScore": 0.95 }],
        "categories:seo": ["error", { "minScore": 0.95 }],
        "first-contentful-paint": [
          "error",
          { "maxNumericValue": 1800, "aggregationMethod": "optimistic" }
        ],
        "largest-contentful-paint": [
          "error",
          { "maxNumericValue": 2500, "aggregationMethod": "optimistic" }
        ],
        "cumulative-layout-shift": ["error", { "maxNumericValue": 0.1 }],
        "total-blocking-time": ["error", { "maxNumericValue": 200 }],
        "speed-index": ["error", { "maxNumericValue": 3400 }],
        "lcp-lazy-loaded": "off",
        "non-composited-animations": "off",
        "prioritize-lcp-image": "off",
        "unused-javascript": ["warn", { "maxLength": 1 }],
        "valid-source-maps": "off",
        "csp-xss": "off"
      }
    },
    "upload": {
      "target": "temporary-public-storage"
    }
  }
}
