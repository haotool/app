# Major ä¾è³´å‡ç´šè©•ä¼°æ–‡æª”

> **å»ºç«‹æ™‚é–“**: 2025-12-02T23:30:00+08:00
> **ç‰ˆæœ¬**: v1.0.0
> **ç‹€æ…‹**: ğŸ“‹ è©•ä¼°ä¸­
> **æ–¹æ³•è«–**: Linus ä¸‰å• + Context7 å®˜æ–¹æ–‡æª”é©—è­‰

---

## 1. æ¦‚è¿°

æœ¬æ–‡æª”è©•ä¼° RateWise å°ˆæ¡ˆä¸­ä¸‰å€‹ä¸»è¦ä¾è³´çš„å‡ç´šå¯è¡Œæ€§ï¼š

| ä¾è³´            | ç•¶å‰ç‰ˆæœ¬ | ç›®æ¨™ç‰ˆæœ¬ | å‡ç´šé¡å‹ | é¢¨éšªç­‰ç´š |
| --------------- | -------- | -------- | -------- | -------- |
| react-router    | 6.28.0   | 7.x      | Major    | ä¸­       |
| tailwindcss     | 3.4.14   | 4.x      | Major    | ä¸­       |
| vite-plugin-pwa | 1.2.0    | -        | -        | è§€å¯Ÿä¸­   |

---

## 2. React Router v7 å‡ç´šè©•ä¼°

### 2.1 Linus ä¸‰å•é©—è­‰

**Q1: é€™æ˜¯å€‹çœŸå•é¡Œå—ï¼Ÿ**

- âš ï¸ éƒ¨åˆ†ï¼šv6 ä»åœ¨ç¶­è­·ï¼Œä½† v7 æä¾›æ›´å¥½çš„ SSG æ”¯æ´
- ç›®å‰ `react-router-dom` é‹ä½œæ­£å¸¸ï¼Œç„¡æ˜é¡¯å•é¡Œ

**Q2: æœ‰æ›´ç°¡å–®çš„æ–¹æ³•å—ï¼Ÿ**

- âœ… æ˜¯ï¼šç¹¼çºŒä½¿ç”¨ v6 ç›´åˆ°æœ‰æ˜ç¢ºéœ€æ±‚

**Q3: æœƒç ´å£ä»€éº¼å—ï¼Ÿ**

- âš ï¸ é«˜é¢¨éšªï¼š
  - éœ€å°‡ `react-router-dom` æ”¹ç‚º `react-router`
  - æ‰€æœ‰ import è·¯å¾‘éœ€æ›´æ–°
  - `createBrowserRouter` API å¯èƒ½æœ‰è®Šæ›´
  - `vite-react-ssg` èˆ‡ v7 çš„ç›¸å®¹æ€§æœªçŸ¥

### 2.2 å‡ç´šæ­¥é©Ÿ [context7:remix-run/react-router]

```bash
# 1. åŸ·è¡Œå®˜æ–¹ codemod
npx codemod remix/2/react-router/upgrade

# 2. æ›´æ–° import è·¯å¾‘
# è®Šæ›´å‰:
import { useLocation } from "react-router-dom";
# è®Šæ›´å¾Œ:
import { useLocation } from "react-router";

# 3. æ›´æ–° vite.config.tsï¼ˆå¦‚ä½¿ç”¨ Remix æ¨¡å¼ï¼‰
# - ç§»é™¤ remix() æ’ä»¶é…ç½®
# - æ–°å¢ reactRouter() æ’ä»¶
# - å»ºç«‹ react-router.config.ts

# 4. é©—è­‰
pnpm typecheck && pnpm lint && pnpm test && pnpm build
```

### 2.3 å½±éŸ¿ç¯„åœåˆ†æ

```bash
# æœå°‹å—å½±éŸ¿æª”æ¡ˆ
grep -r "react-router-dom" apps/ratewise/src --include="*.tsx" --include="*.ts" | wc -l
# é ä¼°: ~20+ æª”æ¡ˆéœ€æ›´æ–°
```

**å—å½±éŸ¿å…ƒä»¶**:

- `routes.tsx` - è·¯ç”±å®šç¾©
- `App.tsx` / `main.tsx` - Router Provider
- æ‰€æœ‰ä½¿ç”¨ `useNavigate`, `useLocation`, `useParams` çš„å…ƒä»¶

### 2.4 å»ºè­°

| é …ç›®     | å»ºè­°                          |
| -------- | ----------------------------- |
| æ™‚ç¨‹     | å»¶å¾Œè‡³ Q1 2026                |
| å‰ç½®æ¢ä»¶ | ç¢ºèª `vite-react-ssg` æ”¯æ´ v7 |
| é©—è­‰æ–¹å¼ | å»ºç«‹ç¨ç«‹åˆ†æ”¯é€²è¡Œå‡ç´šæ¸¬è©¦      |
| å›æ»¾è¨ˆåŠƒ | ä¿ç•™ v6 åˆ†æ”¯ä½œç‚ºå‚™ç”¨          |

---

## 3. Tailwind CSS v4 å‡ç´šè©•ä¼°

### 3.1 Linus ä¸‰å•é©—è­‰

**Q1: é€™æ˜¯å€‹çœŸå•é¡Œå—ï¼Ÿ**

- âŒ å¦ï¼šv3.4.14 åŠŸèƒ½å®Œæ•´ï¼Œç„¡å·²çŸ¥å•é¡Œ

**Q2: æœ‰æ›´ç°¡å–®çš„æ–¹æ³•å—ï¼Ÿ**

- âœ… æ˜¯ï¼šç¹¼çºŒä½¿ç”¨ v3 ç›´åˆ° v4 ç©©å®š

**Q3: æœƒç ´å£ä»€éº¼å—ï¼Ÿ**

- âš ï¸ é«˜é¢¨éšªï¼š
  - é…ç½®èªæ³•å¯èƒ½è®Šæ›´
  - opacity modifier èªæ³•è®Šæ›´
  - é¡è‰²åˆ¥åå¯èƒ½ä¸ç›¸å®¹
  - JIT å¼•æ“é…ç½®å¯èƒ½ä¸åŒ

### 3.2 v4 ä¸»è¦è®Šæ›´

æ ¹æ“š Tailwind CSS å®˜æ–¹æ–‡æª”ï¼Œv4 çš„ä¸»è¦è®Šæ›´åŒ…æ‹¬ï¼š

1. **é…ç½®æ ¼å¼è®Šæ›´**
   - å¾ JavaScript é…ç½®é·ç§»åˆ° CSS åŸç”Ÿé…ç½®
   - `tailwind.config.js` â†’ CSS `@theme` å€å¡Š

2. **èªæ³•è®Šæ›´**

   ```css
   /* v3 */
   .element {
     @apply bg-blue-500/50;
   }

   /* v4 */
   .element {
     @apply bg-blue-500 opacity-50;
   }
   ```

3. **ç§»é™¤çš„åŠŸèƒ½**
   - éƒ¨åˆ† utilities å·²æ£„ç”¨
   - é¡è‰²ç³»çµ±é‡æ§‹

### 3.3 å»ºè­°

| é …ç›®     | å»ºè­°                           |
| -------- | ------------------------------ |
| æ™‚ç¨‹     | å»¶å¾Œè‡³ v4 ç©©å®šç‰ˆç™¼å¸ƒå¾Œ 3 å€‹æœˆ  |
| å‰ç½®æ¢ä»¶ | v4 ç©©å®šç‰ˆ + ç¤¾ç¾¤å›é¥‹æ­£é¢       |
| é©—è­‰æ–¹å¼ | è¦–è¦ºå›æ­¸æ¸¬è©¦ (Chromatic/Percy) |
| å›æ»¾è¨ˆåŠƒ | Git åˆ†æ”¯ä¿ç•™ v3 é…ç½®           |

---

## 4. vite-plugin-pwa è§€å¯Ÿ

### 4.1 ç¾æ³

- **ç•¶å‰ç‰ˆæœ¬**: 1.2.0
- **Vite ç‰ˆæœ¬**: 7.2.6
- **å•é¡Œ**: Peer dependency è­¦å‘Šï¼ˆä¸æ”¯æ´ Vite 7ï¼‰

### 4.2 ç›£æ§ç­–ç•¥

```bash
# å®šæœŸæª¢æŸ¥ GitHub Issues
# https://github.com/vite-pwa/vite-plugin-pwa/issues

# æª¢æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬
pnpm outdated vite-plugin-pwa
```

### 4.3 é¢¨éšªè©•ä¼°

| é¢¨éšª               | å½±éŸ¿ | ç·©è§£æªæ–½                 |
| ------------------ | ---- | ------------------------ |
| PWA åŠŸèƒ½å¤±æ•ˆ       | é«˜   | E2E æ¸¬è©¦ç›£æ§ SW è¨»å†Šç‹€æ…‹ |
| Workbox ç‰ˆæœ¬è¡çª   | ä¸­   | é–å®š workbox 7.4.0       |
| æœªä¾† Vite å‡ç´šå—é˜» | ä¸­   | è¿½è¹¤ä¸Šæ¸¸ issue           |

### 4.4 å»ºè­°

- **çŸ­æœŸ**: ç¶­æŒç¾ç‹€ï¼Œå¿½ç•¥ peer dependency è­¦å‘Š
- **ä¸­æœŸ**: è¿½è¹¤ GitHub issueï¼Œç­‰å¾…å®˜æ–¹æ”¯æ´ Vite 7
- **é•·æœŸ**: è‹¥å®˜æ–¹ä¸æ”¯æ´ï¼Œè©•ä¼°æ›¿ä»£æ–¹æ¡ˆ (å¦‚ `@vite-pwa/pwa`)

---

## 5. å‡ç´šå„ªå…ˆç´šçŸ©é™£

| ä¾è³´            | ç·Šæ€¥æ€§ | é‡è¦æ€§ | é¢¨éšª   | å„ªå…ˆç´š |
| --------------- | ------ | ------ | ------ | ------ |
| react-router v7 | ä½     | ä¸­     | ä¸­     | P2     |
| tailwindcss v4  | ä½     | ä½     | ä¸­     | P3     |
| vite-plugin-pwa | ä½     | é«˜     | è§€å¯Ÿä¸­ | P2     |

---

## 6. è¡Œå‹•è¨ˆåŠƒ

### 6.1 çŸ­æœŸï¼ˆ1-2 é€±ï¼‰

- [ ] æŒçºŒç›£æ§ vite-plugin-pwa GitHub issues
- [ ] ç¢ºèª PWA åŠŸèƒ½åœ¨ Vite 7 ä¸‹æ­£å¸¸é‹ä½œ
- [ ] å®Œæˆå–®å…ƒæ¸¬è©¦è¦†è“‹ç‡æå‡

### 6.2 ä¸­æœŸï¼ˆ1-3 æœˆï¼‰

- [ ] å»ºç«‹ `feature/react-router-v7` åˆ†æ”¯é€²è¡Œå‡ç´šæ¸¬è©¦
- [ ] è©•ä¼° Tailwind v4 ç©©å®šæ€§
- [ ] æ›´æ–°æ­¤æ–‡æª”çš„è©•ä¼°çµæœ

### 6.3 é•·æœŸï¼ˆ3-6 æœˆï¼‰

- [ ] æ ¹æ“šè©•ä¼°çµæœåŸ·è¡Œ React Router v7 å‡ç´š
- [ ] æ ¹æ“šè©•ä¼°çµæœåŸ·è¡Œ Tailwind v4 å‡ç´š
- [ ] æ›´æ–°æ‰€æœ‰ç›¸é—œæ–‡æª”

---

## 7. åƒè€ƒè³‡æº

1. [Context7: React Router Migration Guide](https://github.com/remix-run/react-router)
2. [Context7: Tailwind CSS v4 Upgrade Guide](https://v3.tailwindcss.com/docs/upgrade-guide)
3. [GitHub: vite-plugin-pwa Issues](https://github.com/vite-pwa/vite-plugin-pwa/issues)
4. [LINUS_GUIDE.md](../../LINUS_GUIDE.md) - Linus ä¸‰å•é©—è­‰
5. [002_development_reward_penalty_log.md](./002_development_reward_penalty_log.md) - çæ‡²è¨˜éŒ„

---

## 8. è®Šæ›´è¨˜éŒ„

| ç‰ˆæœ¬  | æ—¥æœŸ       | è®Šæ›´å…§å®¹         | ä½œè€…  |
| ----- | ---------- | ---------------- | ----- |
| 1.0.0 | 2025-12-02 | åˆå§‹è©•ä¼°æ–‡æª”å»ºç«‹ | Agent |
